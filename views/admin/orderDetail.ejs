<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from techzaa.in/larkon/admin/order-detail.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Order Details | Larkon - Responsive Admin Dashboard Template</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" href="/assets/images/favicon.ico">

     <!-- Vendor css (Require in all Page) -->
     <link href="/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" />

     <!-- Theme Config js (Require in all Page) -->
     <script src="/assets/js/config.js"></script>
</head>

<body>

     <!-- START Wrapper -->
     <div class="wrapper">

          <!-- ========== Topbar Start ========== -->
          <header class="topbar">
               <div class="container-fluid">
                    <div class="navbar-header">
                         <div class="d-flex align-items-center">
                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <button type="button" class="button-toggle-menu me-2">
                                        <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Menu Toggle Button -->
                              <div class="topbar-item">
                                   <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Order Details</h4>
                              </div>
                         </div>

                         <div class="d-flex align-items-center gap-1">

                              <!-- Theme Color (Light/Dark) -->
                              <div class="topbar-item">
                                   <button type="button" class="topbar-button" id="light-dark-mode">
                                        <iconify-icon icon="solar:moon-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Notification -->
                              <div class="dropdown topbar-item">
                                   <button type="button" class="topbar-button position-relative" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <iconify-icon icon="solar:bell-bing-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                        <span class="position-absolute topbar-badge fs-10 translate-middle badge bg-danger rounded-pill">3<span class="visually-hidden">unread messages</span></span>
                                   </button>
                                   <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                        <div class="p-3 border-top-0 border-start-0 border-end-0 border-dashed border">
                                             <div class="row align-items-center">
                                                  <div class="col">
                                                       <h6 class="m-0 fs-16 fw-semibold"> Notifications</h6>
                                                  </div>
                                                  <div class="col-auto">
                                                       <a href="javascript: void(0);" class="text-dark text-decoration-underline">
                                                            <small>Clear All</small>
                                                       </a>
                                                  </div>
                                             </div>
                                        </div>
                                        <div data-simplebar style="max-height: 280px;">
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom text-wrap">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-1.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-1" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0"><span class="fw-medium">Josephine Thompson </span>commented on admin panel <span>" Wow üòç! this admin looks good and awesome design"</span></p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-info text-info fs-20 rounded-circle">
                                                                      D
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Donoghue Susan</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Hi, How are you? What about our next meeting
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-3.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-3" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Jacob Gines</p>
                                                            <p class="mb-0 text-wrap">Answered to your comment on the cash flow forecast's graph üîî.</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-warning text-warning fs-20 rounded-circle">
                                                                      <iconify-icon icon="iconamoon:comment-dots-duotone"></iconify-icon>
                                                                 </span>
                                                            </div>
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold text-wrap">You have received <b>20</b> new messages in the
                                                                 conversation</p>
                                                       </div>
                                                  </div>
                                             </a>
                                             <!-- Item -->
                                             <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                                  <div class="d-flex">
                                                       <div class="flex-shrink-0">
                                                            <img src="/assets/images/users/avatar-5.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-5" />
                                                       </div>
                                                       <div class="flex-grow-1">
                                                            <p class="mb-0 fw-semibold">Shawn Bunch</p>
                                                            <p class="mb-0 text-wrap">
                                                                 Commented on Admin
                                                            </p>
                                                       </div>
                                                  </div>
                                             </a>
                                        </div>
                                        <div class="text-center py-3">
                                             <a href="javascript:void(0);" class="btn btn-primary btn-sm">View All Notification <i class="bx bx-right-arrow-alt ms-1"></i></a>
                                        </div>
                                   </div>
                              </div>

                              <!-- Theme Setting -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:settings-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- Activity -->
                              <div class="topbar-item d-none d-md-flex">
                                   <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-activity-offcanvas" aria-controls="theme-settings-offcanvas">
                                        <iconify-icon icon="solar:clock-circle-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   </button>
                              </div>

                              <!-- User -->
                              <div class="dropdown topbar-item">
                                   <a type="button" class="topbar-button" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="d-flex align-items-center">
                                             <img class="rounded-circle" width="32" src="/assets/images/users/avatar-1.jpg" alt="avatar-3">
                                        </span>
                                   </a>
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <!-- item-->
                                        <h6 class="dropdown-header">Welcome Gaston!</h6>
                                        <a class="dropdown-item" href="pages-profile.html">
                                             <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                        </a>
                                        <a class="dropdown-item" href="apps-chat.html">
                                             <i class="bx bx-message-dots text-muted fs-18 align-middle me-1"></i><span class="align-middle">Messages</span>
                                        </a>

                                        <a class="dropdown-item" href="pages-pricing.html">
                                             <i class="bx bx-wallet text-muted fs-18 align-middle me-1"></i><span class="align-middle">Pricing</span>
                                        </a>
                                        <a class="dropdown-item" href="pages-faqs.html">
                                             <i class="bx bx-help-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Help</span>
                                        </a>
                                        <a class="dropdown-item" href="auth-lock-screen.html">
                                             <i class="bx bx-lock text-muted fs-18 align-middle me-1"></i><span class="align-middle">Lock screen</span>
                                        </a>

                                        <div class="dropdown-divider my-1"></div>

                                        <a class="dropdown-item text-danger" href="auth-signin.html">
                                             <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                        </a>
                                   </div>
                              </div>

                              <!-- App Search-->
                              <form class="app-search d-none d-md-block ms-2">
                                   <div class="position-relative">
                                        <input type="search" class="form-control" placeholder="Search..." autocomplete="off" value="">
                                        <iconify-icon icon="solar:magnifer-linear" class="search-widget-icon"></iconify-icon>
                                   </div>
                              </form>
                         </div>
                    </div>
               </div>
          </header>

          <!-- Activity Timeline -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100 p-4">
                              <div class="position-relative ms-2">
                                   <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                                  <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                                  <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                       <div class="row">
                                                            <div class="col-lg-6 border-end border-light">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-figma fs-20 text-red"></i>
                                                                      <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                                 </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                 <div class="d-flex align-items-center gap-2">
                                                                      <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                      <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                                 </div>
                                                            </div>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                                  </h5>
                                                  <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                                  <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                       <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                       <div class="ms-auto">
                                                            <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                             <div class="ms-2">
                                                  <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                                  </h5>
                                                  <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                                  <div class="mt-2">
                                                       <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                                  </h5>
                                                  <div class="row g-2 mt-2">
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                       <div class="col-lg-4">
                                                            <a href="#!">
                                                                 <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                            </a>
                                                       </div>
                                                  </div>
                                                  <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                                  <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                                   <div class="position-relative ps-4">
                                        <div class="mb-4">
                                             <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                             <div class="ms-2">
                                                  <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                                  </h5>
                                                  <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                                  <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                         </div>
                    </div>
               </div>
          </div>

          <!-- Right Sidebar (Theme Settings) -->
          <div>
               <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
                    <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                         <h5 class="text-white m-0">Theme Settings</h5>
                         <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body p-0">
                         <div data-simplebar class="h-100">
                              <div class="p-3 settings-bar">

                                   <div>
                                        <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                             <label class="form-check-label" for="layout-color-light">Light</label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                             <label class="form-check-label" for="layout-color-dark">Dark</label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                             <label class="form-check-label" for="topbar-color-light">Light</label>
                                        </div>
                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                             <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                        </div>
                                   </div>


                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                             <label class="form-check-label" for="leftbar-color-light">
                                                  Light
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                             <label class="form-check-label" for="leftbar-color-dark">
                                                  Dark
                                             </label>
                                        </div>
                                   </div>

                                   <div>
                                        <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                             <label class="form-check-label" for="leftbar-size-default">
                                                  Default
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                             <label class="form-check-label" for="leftbar-size-small">
                                                  Condensed
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                             <label class="form-check-label" for="leftbar-hidden">
                                                  Hidden
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                             <label class="form-check-label" for="leftbar-size-small-hover-active">
                                                  Small Hover Active
                                             </label>
                                        </div>

                                        <div class="form-check mb-2">
                                             <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                             <label class="form-check-label" for="leftbar-size-small-hover">
                                                  Small Hover
                                             </label>
                                        </div>
                                   </div>

                              </div>
                         </div>
                    </div>
                    <div class="offcanvas-footer border-top p-3 text-center">
                         <div class="row">
                              <div class="col">
                                   <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          <!-- ========== Topbar End ========== -->

          <!-- ========== App Menu Start ========== -->
          <%- include("../../views/partials/admin/nav") %>
          <!-- ========== App Menu End ========== -->

          <!-- ==================================================== -->
          <!-- Start right Content here -->
          <!-- ==================================================== -->

          <div class="page-content">

               <!-- Start Container -->
               <div class="container-xxl">

                    <div class="row">
                         <div class="col-xl-9 col-lg-8">
                              <div class="row">
                                   <div class="col-lg-12">
                                        <div class="card">
                                             <div class="card-body">
                                                  <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
                                                       <div>
                                                            <h4 class="fw-medium text-dark d-flex align-items-center gap-2"><%= orderData.orderId%> 
                                                                 <span class="badge bg-success-subtle text-success  px-2 py-1 fs-13"><%= orderData.status%></span>
                                                                 <span class="border border-warning text-warning fs-13 px-2 py-1 rounded">In Progress</span>
                                                            </h4>
                                                            <p class="mb-0">Order / Order Details / <%= orderData.orderId %> - 
                                                                 <%= new Date(orderData.createdAt).toLocaleString("en-US", { 
                                                                     year: "numeric", 
                                                                     month: "long", 
                                                                     day: "numeric", 
                                                                     hour: "2-digit", 
                                                                     minute: "2-digit", 
                                                                     hour12: true 
                                                                 }) %></p>
                                                                 
                                                       </div>
                                                       <div class="dropdown">
                                                            <button class="btn btn-primary dropdown-toggle" type="button" id="orderStatusDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                                                Change Status
                                                            </button>
                                                            <span id="currentOrderStatus" style="display:none;"><%=orderData.status%></span>
                                                            <ul class="dropdown-menu" aria-labelledby="orderStatusDropdown">
                                                                 <li><a class="dropdown-item status-option" data-status="Ordered" href="#">Ordered</a></li>
                                                                 <li><a class="dropdown-item status-option" data-status="Pending" href="#">Pending</a></li>
                                                                 <li><a class="dropdown-item status-option" data-status="Shipped" href="#">Shipped</a></li>
                                                                 <li><a class="dropdown-item status-option" data-status="Delivered" href="#">Delivered</a></li>
                                                                 <li><a class="dropdown-item status-option" data-status="Cancelled" href="#">Cancelled</a></li>
                                                                 
     
                                                            </ul>
                                                            <input type="hidden" value="<%= orderData._id%>">
                                                        </div>
                                                        <button id="updateStatusBtn" class="btn btn-primary">Update Status</button>
                                                  </div>

                                                  
                                                  
                                             </div>
                                             
                                        </div>
                                        <div class="card">
                                             <div class="card-header">
                                                  <h4 class="card-title">Product</h4>
                                             </div>
                                             <div class="card-body">
                                                  <div class="table-responsive">
                                                      <table class="table align-middle mb-0 table-hover table-centered">
                                                          <thead class="bg-light-subtle border-bottom">
                                                              <tr>
                                                                  <th style="width: 30%;">Product Image & Name</th>
                                                                  <th class="text-center" style="width: 10%;">Quantity</th>
                                                                  <th class="text-center" style="width: 15%;">Price</th>
                                                                  <th class="text-center" style="width: 15%;">Total Amount</th>
                                                                  <th class="text-center" style="width: 15%;">Status</th>
                                                                  <th class="text-center" style="width: 15%;">Action</th>
                                                              </tr>
                                                          </thead>
                                                          <tbody>
                                                              <% orderData.products.forEach((val) => { %>
                                                                  <tr>
                                                                      <td>
                                                                          <div class="d-flex align-items-center gap-3">
                                                                              <div class="rounded bg-light avatar-md d-flex align-items-center justify-content-center">
                                                                                  <img src="<%= val.productId.productImage[0] %>" alt="" class="avatar-md">
                                                                              </div>
                                                                              <div>
                                                                                  <a href="#!" class="text-dark fw-medium fs-15">
                                                                                      <%= val.productId.productName %>
                                                                                  </a>
                                                                              </div>
                                                                          </div>
                                                                      </td>
                                              
                                                                      <td class="text-center"><%= val.quantity %></td>
                                                                      <td class="text-center">‚Çπ<%= val.price %></td>
                                                                      <td class="text-center">‚Çπ<%= val.totalPrice %></td>
                                              
                                                                      <!-- Status Column -->
                                                                      <td class="text-center">
                                                                          <span class="badge 
                                                                              <%= val.status === 'Cancelled' ? 'bg-danger' : 
                                                                                  val.status === 'Return Requested' ? 'bg-warning' : 
                                                                                  val.status === 'Return Approved' ? 'bg-success' : 'bg-info' %>">
                                                                              <%= val.status %>
                                                                          </span>
                                                                          <% if (val.status === "Cancelled" || val.status === "Return Requested" || val.status === "Return Approved") { %>
                                                                              <div class="text-danger mt-1 small">
                                                                                  Reason: <%= val.reason %>
                                                                              </div>
                                                                          <% } %>
                                                                      </td>
                                              
                                                                      <!-- Action Column -->
                                                                      <td class="text-center">
                                                                          <% if (val.status === "Return Requested") { %>
                                                                              <div class="d-flex gap-2 justify-content-center">
                                                                                   <button 
                                                                                   class="btn btn-success btn-sm"
                                                                                   onclick="approveRequest('<%= orderData._id %>', '<%= val._id %>', '<%= val.quantity%>', '<%= val.specId%>', '<%= val.productId._id%>', '<%= val.totalPrice %>')"
                                                                                   >
                                                                                   Approve
                                                                                  
                                                                                  </button>
                                              
                                                                                  <button 
                                                                                      class="btn btn-danger btn-sm"
                                                                                      onclick="rejectRequest('<%= orderData._id %>', '<%= val._id %>')"
                                                                                  >
                                                                                      Reject
                                                                                  </button>
                                                                              </div>
                                                                          <% } %>
                                                                      </td>
                                                                  </tr>
                                                              <% }) %>
                                                          </tbody>
                                                      </table>
                                                  </div>
                                              </div>
                                              
                                              
                                        </div>
                                        
                                        
                                   </div>
                              </div>
                         </div>
                         <div class="col-xl-3 col-lg-4">
                              <div class="card">
                                   <div class="card-header">
                                        <h4 class="card-title">Order Summary</h4>
                                   </div>
                                   <div class="card-body">
                                        <div class="table-responsive">
                                             <table class="table mb-0">
                                                  <tbody>
                                                       <tr>
                                                            <td class="px-0">
                                                                 <p class="d-flex mb-0 align-items-center gap-1"><iconify-icon icon="solar:clipboard-text-broken"></iconify-icon> Sub Total : </p>
                                                            </td>
                                                            <td class="text-end text-dark fw-medium px-0">‚Çπ<%= orderData.totalAmount%></td>
                                                       </tr>
                                                       <tr>
                                                            <td class="px-0">
                                                                 <p class="d-flex mb-0 align-items-center gap-1"><iconify-icon icon="solar:ticket-broken" class="align-middle"></iconify-icon> Discount : </p>
                                                            </td>
                                                            <td class="text-end text-dark fw-medium px-0">-Nill</td>
                                                       </tr>
                                                       <tr>
                                                            <td class="px-0">
                                                                 <p class="d-flex mb-0 align-items-center gap-1"><iconify-icon icon="solar:kick-scooter-broken" class="align-middle"></iconify-icon> Delivery Charge : </p>
                                                            </td>
                                                            <td class="text-end text-dark fw-medium px-0">‚Çπ00.00</td>
                                                       </tr>
                                                       

                                                  </tbody>
                                             </table>
                                        </div>
                                   </div>
                                   <div class="card-footer d-flex align-items-center justify-content-between bg-light-subtle">
                                        <div>
                                             <p class="fw-medium text-dark mb-0">Total Amount</p>
                                        </div>
                                        <div>
                                             <p class="fw-medium text-dark mb-0">‚Çπ<%= orderData.payableAmount%></p>
                                        </div>

                                   </div>
                              </div>
                              
                              <div class="card">
                                   <div class="card-header">
                                        <h4 class="card-title">Customer Details</h4>
                                   </div>
                                   <div class="card-body">
                                        <div class="d-flex align-items-center gap-2">
                                             
                                             <div>
                                                  <p class="mb-1"><%= orderData.userId.name%></p>
                                                  <a href="#!" class="link-primary fw-medium"><%= orderData.userId.email%></a>
                                             </div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-3">
                                             <h5 class=""><%= orderData.userId.phone%></h5>
          
                                        </div>
                                        

                                        <div class="d-flex justify-content-between mt-3">
                                             <h5 class="">Shipping Address</h5>
                                        </div>

                                        <div>
                                             <p class="mb-1"><%= orderData.deliveryAddress.addressType%></p>
                                             <p class="mb-1"><%= orderData.deliveryAddress.city%> ,</p>
                                             <p class="mb-1"><%= orderData.deliveryAddress.landMark%> ,</p>
                                             <p class="mb-1"><%= orderData.deliveryAddress.state%> ,</p>
                                             <p class="mb-1"><%= orderData.deliveryAddress.pincode%> </p>
                                             <p class=""><%= orderData.deliveryAddress.phone%></p>
                                             <p class=""><%= orderData.deliveryAddress.altPhone%></p>
                                        </div>

                                        <div class="d-flex justify-content-between mt-3">
                                             <h5 class="">Billing Address</h5>
                                             
                                        </div>

                                        <p class="mb-1">Same as shipping address</p>
                                   </div>
                              </div>
                              
                         </div>
                    </div>
               </div>

          </div>
          <!-- End Container Fluid -->

          <!-- ========== Footer Start ========== -->
          <footer class="footer">
              <div class="container-fluid">
                  <div class="row">
                      <div class="col-12 text-center">
                          <script>document.write(new Date().getFullYear())</script> &copy; Larkon. Crafted by <iconify-icon icon="iconamoon:heart-duotone" class="fs-18 align-middle text-danger"></iconify-icon> <a
                              href="https://1.envato.market/techzaa" class="fw-bold footer-text" target="_blank">Techzaa</a>
                      </div>
                  </div>
              </div>
          </footer>
          <!-- ========== Footer End ========== -->

     </div>
     <!-- ==================================================== -->
     <!-- End Page Content -->
     <!-- ==================================================== -->

     </div>
     <!-- END Wrapper -->

     <!-- Vendor Javascript (Require in all Page) -->
     <script src="/assets/js/vendor.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

     <!-- App Javascript (Require in all Page) -->
     <script src="/assets/js/app.js"></script>
     <script>
          document.addEventListener('DOMContentLoaded', function() {
    // Variables to store the selected status
    let selectedStatus = '';
    let currentStatus = document.getElementById('currentOrderStatus').textContent.trim(); // Assuming you have an element with current status
    
    // Get all status options and add click event listeners
    const statusOptions = document.querySelectorAll('.status-option');
    statusOptions.forEach(option => {
        option.addEventListener('click', function(e) {
            e.preventDefault();
            selectedStatus = this.getAttribute('data-status');
            
            // Update dropdown button text to show selected status
            document.getElementById('orderStatusDropdown').textContent = selectedStatus;
        });
    });
    
    // Add click event listener to the update button
    const updateBtn = document.getElementById('updateStatusBtn');
    updateBtn.addEventListener('click', function() {
        // Check if the current status is already "Cancelled"
        if (currentStatus === "Cancelled") {
            Swal.fire({
                icon: 'error',
                title: 'Action Not Allowed',
                text: 'This order has already been cancelled and cannot be updated further.'
            });
            return; // Stop execution if order is already cancelled
        }
        
        if (selectedStatus) {
            // Get the order ID from the hidden input
            const orderId = document.querySelector('input[type="hidden"]').value;
            
            // Show confirmation dialog using SweetAlert
            Swal.fire({
                title: 'Confirm Status Update',
                text: `Are you sure you want to change the order status to ${selectedStatus}?`,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, update it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Send the status update to the backend
                    updateOrderStatus(orderId, selectedStatus);
                }
            });
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Please select a status first!'
            });
        }
    });
    console.log("sdfs",status)
    // Function to send the status to the backend
    function updateOrderStatus(orderId, status) {
        console.log("this is orderid", orderId)
        console.log("this is status", status)
        
        fetch('/admin/update-status', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                orderId: orderId,
                status: status
            })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log('Status updated successfully:', data);
            
            // Update current status variable if status was successfully changed to "Cancelled"
            if (status === "Cancelled") {
                currentStatus = "Cancelled";
                
                // Optionally disable the update button visually
                updateBtn.disabled = true;
                updateBtn.classList.add('disabled');
            }
            
            // Show success message
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: `Order status has been updated to ${status}`,
                timer: 2000,
                showConfirmButton: false
            }).then(() => {
                window.location.reload();
            });
        })
        .catch(error => {
            console.error('Error updating status:', error);
            
            // Show error message
            Swal.fire({
                icon: 'error',
                title: 'Update Failed',
                text: 'Failed to update order status. Please try again.'
            });
        });
    }
    
    // Immediately check if the current status is "Cancelled" and disable the button if it is
    if (currentStatus === "Cancelled"){
        updateBtn.disabled = true;
        updateBtn.classList.add('disabled');
        
        // Optionally add visual indication
        updateBtn.title = "This order has been cancelled and cannot be updated";
    }
});
     </script>


     <script>
          async function approveRequest(orderId, productId, quantity, specId,productId_id, totalAmount) {
    const confirmation = await Swal.fire({
        title: "Are you sure?",
        text: "Do you want to approve this return request?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#4CAF50",  // Green for Approve
        cancelButtonColor: "#d33",
        confirmButtonText: "Yes, Approve",
        cancelButtonText: "Cancel"
    });

    if (!confirmation.isConfirmed) return;

    try {
        const response = await fetch('/admin/approveRequest', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ orderId, productId, specId, quantity, productId_id, totalAmount})
        });

        const result = await response.json();
        if (result.success) {
            Swal.fire({
                title: "Approved!",
                text: "Return request approved successfully.",
                icon: "success",
                timer: 2000,
                showConfirmButton: false
            });
            setTimeout(() => location.reload(), 2000);
        } else {
            Swal.fire({
                title: "Failed",
                text: result.message,
                icon: "error"
            });
        }
    } catch (error) {
        console.error("Error approving request:", error);
        Swal.fire({
            title: "Error",
            text: "Failed to approve request.",
            icon: "error"
        });
    }
}

async function rejectRequest(orderId, productId) {
    const confirmation = await Swal.fire({
        title: "Are you sure?",
        text: "Do you want to reject this return request?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#d33",  // Red for Reject
        cancelButtonColor: "#4CAF50",
        confirmButtonText: "Yes, Reject",
        cancelButtonText: "Cancel"
    });

    if (!confirmation.isConfirmed) return;

    try {
        const response = await fetch('/admin/rejectRequest', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ orderId, productId })
        });

        const result = await response.json();
        if (result.success) {
            Swal.fire({
                title: "Rejected!",
                text: "Return request rejected successfully.",
                icon: "success",
                timer: 2000,
                showConfirmButton: false
            });
            setTimeout(() => location.reload(), 2000);
        } else {
            Swal.fire({
                title: "Failed",
                text: result.message,
                icon: "error"
            });
        }
    } catch (error) {
        console.error("Error rejecting request:", error);
        Swal.fire({
            title: "Error",
            text: "Failed to reject request.",
            icon: "error"
        });
    }
}

     </script>

</body>


<!-- Mirrored from techzaa.in/larkon/admin/order-detail.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Dec 2024 05:43:17 GMT -->
</html>